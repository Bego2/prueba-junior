<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="modern furniture online shop called mater"
    />
    <meta name="keywords" content="e-commerce, shop, furniture, mater" />
    <title>Prueba Junior</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="./css/styles.css" />
  </head>

  <body class="Body">
    <header class="Header">
      <h1 class="H1">mater</h1>

      <div class="Header-menu">
        <span class="material-symbols-outlined Header-menuBurguer">menu</span>
      </div>
    </header>

    <main class="Main">
      <button class="ButtonProduct">Product Details</button>

      <!-- <div id="page1" class="Tabs-content u-visible">
        <h2 class="H2">Pagina 1</h2>
      </div>

      <div id="page2" class="Tabs-content">
        <h2 class="H2">Pagina 2</h2>
      </div> -->
    </main>

    <nav class="Tabs">
      <div class="Tabs-hr"></div>

      <ul class="Tabs-buttons">
        <li data-tab="page1" class="Tabs-button u-active">
          <p class="Tabs-txt">01</p>
          <h2 class="Tabs-h2">Shell Dining Chair</h2>
        </li>

        <li data-tab="page2" class="Tabs-button">
          <p class="Tabs-txt">02</p>
          <h2 class="Tabs-h2">Dunes Anthrazite Black</h2>
        </li>
      </ul>
    </nav>

    <script>
      // ____________________________________
      // Variables
      // ____________________________________
      const tabsInfo = [
        {
          id: "page1",
          author: "Michael W. Dreeben",
          product: "Shell Dining Chair",
          description:
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit.Est aperiam quos totam blanditiis sapiente sit, quasi non excepturi architecto dolorem?",
          file: "silla_negra.png",
          alt: "Shell Dining Chair in black",
        },
        {
          id: "page2",
          author: "Jeaper K. Thomas",
          product: "Dunes Anthrazite Black",
          description:
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit.Est aperiam quos totam blanditiis sapiente sit, quasi non excepturi architecto dolorem?",
            file: "mesa_negra.png",
          alt: "Dunes Anthrazite table in black",
        },
      ];
      const main = document.querySelector(".Main");
      const list_btns = document.querySelectorAll(".Tabs-button");
      // const list_pages = document.querySelectorAll(".Tabs-content");

      // ____________________________________
      // Funciones
      // ____________________________________

      tabsInfo.forEach((tab, index) => {
        const tabContent = document.createElement("div");
        tabContent.classList.add("Tabs-content");

        if (index === 0) tabContent.classList.add("u-visible");
        tabContent.setAttribute("id", tab.id);


        // [DIV: TEXTOS]
        const textContainer = document.createElement("div");
        textContainer.classList.add("Main-texts");
        
        // creamos el autor <h4>
        const h4 = document.createElement("h4");
        h4.classList.add("H4");
        h4.textContent = tab.author;

        // creamos el titulo del producto <h2>
        const h2 = document.createElement("h2");
        h2.classList.add("H2");
        h2.textContent = tab.product;

        const txt = document.createElement("p");
        txt.classList.add("Main-description");
        txt.textContent = tab.description;

       // [DIV: IMAGEN]

        //creamos etiqueta <img>
        const img = document.createElement("img");
        img.classList.add("Main-img");
        img.src = `img/${tab.file}`;
        img.alt = tab.alt;

        // TextContainer es el contenedor padre de los textos del producto
        textContainer.appendChild(h4);
        textContainer.appendChild(h2);
        textContainer.appendChild(txt);

        // TabContent el contenedor padre de la caja de txts y de la imagen 
        tabContent.appendChild(img)
        tabContent.appendChild(textContainer);
      ;

        // Main el el contenedor padre tabContent
        main.appendChild(tabContent);
      });

      const list_pages = document.querySelectorAll(".Tabs-content");

      // Activar la tab correspondiente
      function activarTab(index) {
        // Actualizar los botones
        list_btns.forEach((btn, idx) => {
          if (idx === index) {
            btn.classList.add("u-active");
          } else {
            btn.classList.remove("u-active");
          }
        });

        // Actualizar las páginas visibles
        list_pages.forEach((page, idx) => {
          if (idx === index) {
            page.classList.add("u-visible");
          } else {
            page.classList.remove("u-visible");
          }
        });
      }

      // Detectar la sección visible y activar transiciones
      function detectarSeccion() {
        list_pages.forEach((page, index) => {
          const rect = page.getBoundingClientRect();

          // Si la sección está visible (en la mitad de la pantalla), activarla
          if (rect.top >= 0 && rect.top < window.innerHeight / 2) {
            page.classList.add("u-visible"); // Activar la animación
            activarTab(index); // Cambiar tab activa
          } else {
            page.classList.remove("u-visible"); // Ocultar la animación si no es visible
          }
        });
      }

      // ____________________________________
      // Eventos
      // ____________________________________

      // Detectar scroll en el contenedor principal
      main.addEventListener("scroll", detectarSeccion);

      // Inicializar la primera tab
      activarTab(0);
    </script>
  </body>
</html>
